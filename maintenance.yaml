# If you want to use Username and Password to be authenticated by Zabbix Server
task:
- name: Set API token
  ansible.builtin.set_fact:
    ansible_zabbix_auth_key: 2f6047daa57d3331a14bcdb5527a41a91635bafcc799bbc4aecde38f2a5db8f1

- name: Create a named maintenance window for host www1 for 90 minutes
  # set task level variables as we change ansible_connection plugin here
  vars:
    ansible_network_os: community.zabbix.zabbix
    ansible_connection: httpapi
    ansible_httpapi_port: 443
    ansible_httpapi_use_ssl: true
    ansible_httpapi_validate_certs: false
    ansible_zabbix_url_path: "https://observability.motherson.com/zabbix"  # If Zabbix WebUI runs on non-default (zabbix) path ,e.g. http://<FQDN>/zabbixeu
    ansible_host: https://observability.motherson.com
  community.zabbix.zabbix_maintenance:
    name: testing for zabbix test
    host_name: zabbix server_test_Server
    state: present
    minutes: 90
